<Page x:Class="DotBotCarClient.Views.StatusPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Style="{StaticResource TeslaPage}"
      Title="StatusPage">

    <Grid x:Name="RootGrid">

        <!-- 페이지 등장 애니메이션 -->
        <Grid.RenderTransform>
            <TranslateTransform X="40"/>
        </Grid.RenderTransform>

        <Grid.Triggers>
            <EventTrigger RoutedEvent="Loaded">
                <BeginStoryboard>
                    <Storyboard>
                        <DoubleAnimation Storyboard.TargetProperty="Opacity"
                                         From="0" To="1" Duration="0:0:0.4"/>

                        <DoubleAnimation Storyboard.TargetProperty="(Grid.RenderTransform).(TranslateTransform.X)"
                                         From="40" To="0" Duration="0:0:0.4"/>
                    </Storyboard>
                </BeginStoryboard>
            </EventTrigger>
        </Grid.Triggers>


        <!-- =============================
             화면 구조
        ==============================-->

        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Header -->
            <RowDefinition Height="*"/>
            <!-- Car -->
            <RowDefinition Height="Auto"/>
            <!-- Controls -->
            <RowDefinition Height="Auto"/>
            <!-- Navigation Bar -->
        </Grid.RowDefinitions>


        <!-- =============================
             1) HEADER
        ==============================-->
        <StackPanel Grid.Row="0"
                    Margin="20,40,20,10"
                    HorizontalAlignment="Center">

            <TextBlock Text="My Model S"
                       Style="{StaticResource TeslaTitle}"
                       FontSize="34"
                       HorizontalAlignment="Center"/>

            <TextBlock x:Name="CarStateText"
                       Text="차량 상태 : 대기 중"
                       Style="{StaticResource TeslaSubText}"
                       HorizontalAlignment="Center"
                       Margin="0,3,0,10"/>


            <!-- 중앙정렬된 배터리 표시 -->
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center"
                        x:Name="BatteryPanel">

                <Image x:Name="BatteryIcon"
                       Source="/Assets/battery.png"
                       Width="28"
                       Height="28"
                       Stretch="Uniform"
                       Margin="0,0,8,0"/>

                <TextBlock x:Name="BatteryText"
                           Text="70%"
                           FontSize="22"
                           FontWeight="Bold"
                           Foreground="#4CAF50"
                           VerticalAlignment="Center"/>
            </StackPanel>

            <!-- 주행 가능 거리 -->
            <TextBlock x:Name="RangeText"
                       Text="Range: 320 km"
                       Style="{StaticResource TeslaSubText}"
                       FontSize="16"
                       HorizontalAlignment="Center"
                       Margin="0,8,0,0"/>

        </StackPanel>



        <!-- =============================
             추가 정보 (온도, 위치, 최근 이동)
        ==============================-->
        <Grid Grid.Row="0"
              Margin="20,0,20,0"
              VerticalAlignment="Bottom">

            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <!-- 온도 정보 -->
            <StackPanel Grid.Column="0"
                        HorizontalAlignment="Left">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="🌡️ " FontSize="14"/>
                    <TextBlock x:Name="TempText"
                               Text="실내 22°C"
                               Style="{StaticResource TeslaSubText}"
                               FontSize="13"/>
                </StackPanel>
                <TextBlock x:Name="OutTempText"
                           Text="실외 18°C"
                           Style="{StaticResource TeslaSubText}"
                           FontSize="13"
                           Margin="18,2,0,0"
                           Opacity="0.7"/>
            </StackPanel>

            <!-- 최근 이동 거리 -->
            <StackPanel Grid.Column="1"
                        HorizontalAlignment="Right">
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="🚗 " FontSize="14"/>
                    <TextBlock x:Name="LastTripText"
                               Text="Last trip"
                               Style="{StaticResource TeslaSubText}"
                               FontSize="13"/>
                </StackPanel>
                <TextBlock x:Name="LastTripDistanceText"
                           Text="15.2 km"
                           Style="{StaticResource TeslaSubText}"
                           FontSize="13"
                           Margin="0,2,0,0"
                           HorizontalAlignment="Right"
                           Opacity="0.7"/>
            </StackPanel>
        </Grid>



        <!-- =============================
             2) CAR IMAGE with Gradient Background
        ==============================-->

        <Border Grid.Row="1"
                Margin="30,10,30,30"
                Background="Transparent"
                CornerRadius="28"
                VerticalAlignment="Top">

            <Grid>
                <!-- 그라데이션 배경 효과 -->
                <Ellipse Width="280" Height="280"
                         VerticalAlignment="Center"
                         HorizontalAlignment="Center"
                         Margin="0,20,0,0">
                    <Ellipse.Fill>
                        <RadialGradientBrush>
                            <GradientStop Color="#40FFFFFF" Offset="0"/>
                            <GradientStop Color="#10FFFFFF" Offset="0.5"/>
                            <GradientStop Color="#00FFFFFF" Offset="1"/>
                        </RadialGradientBrush>
                    </Ellipse.Fill>
                </Ellipse>

                <!-- 자동차 이미지 -->
                <Image x:Name="CarImage"
                       Source="/Assets/car.png"
                       Stretch="Uniform"
                       Opacity="0.92"
                       Margin="-8,40,15,-27"/>
            </Grid>
        </Border>



        <!-- =============================
             3) CONTROL ICONS (Start/Lock/Trunk)
        ==============================-->
        <StackPanel Grid.Row="2"
                    Margin="0,0,0,15">

            <!-- 차량 위치 정보 -->
            <Border Background="{StaticResource TeslaBox}"
                    CornerRadius="12"
                    Padding="15,10"
                    Margin="20,0,20,15">
                <StackPanel Orientation="Horizontal"
                            HorizontalAlignment="Center">
                    <TextBlock Text="📍 " FontSize="16" VerticalAlignment="Center"/>
                    <TextBlock x:Name="LocationText"
                               Text="주차 위치: 집 (2분 전)"
                               Style="{StaticResource TeslaSubText}"
                               FontSize="14"
                               VerticalAlignment="Center"/>
                </StackPanel>
            </Border>

            <!-- 컨트롤 아이콘들 -->
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Center">

                <!-- START -->
                <Border Style="{StaticResource TeslaIconBox}"
                        Margin="8">
                    <Button Background="Transparent"
                            BorderBrush="Transparent"
                            Click="start_Click">
                        <StackPanel>
                            <Image Source="/Assets/start.png" Width="40"/>
                            <TextBlock Text="Start"
                                       Style="{StaticResource TeslaSubText}"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </Border>

                <!-- LOCK -->
                <Border Style="{StaticResource TeslaIconBox}"
                        Margin="8">
                    <Button Background="Transparent"
                            BorderBrush="Transparent"
                            Click="Lock_Click">
                        <StackPanel>
                            <Image Source="/Assets/lock.png" Width="40"/>
                            <TextBlock Text="Lock"
                                       Style="{StaticResource TeslaSubText}"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </Border>

                <!-- TRUNK -->
                <Border Style="{StaticResource TeslaIconBox}"
                        Margin="8">
                    <Button Background="Transparent"
                            BorderBrush="Transparent"
                            Click="Trunk_Click">
                        <StackPanel>
                            <Image Source="/Assets/trunk.png" Width="40"/>
                            <TextBlock Text="Trunk"
                                       Style="{StaticResource TeslaSubText}"
                                       HorizontalAlignment="Center"/>
                        </StackPanel>
                    </Button>
                </Border>

            </StackPanel>
        </StackPanel>



        <!-- =============================
             4) NAVIGATION BAR
        ==============================-->

        <Grid Grid.Row="3"
              Height="60"
              Background="{StaticResource TeslaBox}">
            <Grid.ColumnDefinitions>
                <ColumnDefinition/>
                <ColumnDefinition/>
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0"
                    Content="⚡ Charging"
                    Click="GoCharging"
                    Background="Transparent"
                    BorderBrush="Transparent"
                    Foreground="{StaticResource TeslaAccent}"/>

            <Button Grid.Column="1"
                    Content="⚙️ Controls"
                    Click="GoControls"
                    Background="Transparent"
                    BorderBrush="Transparent"/>
        </Grid>

    </Grid>
</Page>